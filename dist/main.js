!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.r(t);var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.size=3,this.colorTicker=0,this.geometry=new THREE.SphereGeometry(this.size,20,20),this.material=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors}),this.sphereShape=new THREE.Mesh(this.geometry,this.material),this.sphereShape.dynamic=!0;for(var t=this.geometry.faces.length,i=0;i<t;i++){var n=this.geometry.faces[i],s=new THREE.Color(16777215),r=.36*Math.random()+.64,a=.36*Math.random()+.64,o=.36*Math.random()+.64;s.setRGB(r,a,o),n.color=s}this.geometry.elementsNeedUpdate=!0,this.sphereShape.position.y=2.5}var t,i,s;return t=e,(i=[{key:"colorSwitch",value:function(e){if(255===e)for(var t=this.geometry.faces.length,i=0;i<t;i++){var n=this.geometry.faces[i],s=new THREE.Color(16777215),r=.36*Math.random()+.64,a=.36*Math.random()+.64,o=.36*Math.random()+.64;s.setRGB(r,a,o),n.color=s}this.geometry.elementsNeedUpdate=!0}}])&&n(t.prototype,i),s&&n(t,s),e}();function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listener=new THREE.AudioListener,this.audioList=["Dont Wanna Know.mp3","Feel So Close.mp3","If I Lose Myself.mp3","Sunday Morning.mp3"],this.audio=new THREE.Audio(this.listener),window.audio=this.audio,this.mediaElement=new Audio("assets/Sunday Morning.mp3"),this.mediaElement.autoplay=!1,this.audio.setMediaElementSource(this.mediaElement),this.analyser=new THREE.AudioAnalyser(this.audio,1024),window.analyser=this.analyser}var t,i,n;return t=e,(i=[{key:"fetchNewFrequencies",value:function(){this.analyser.getFrequencyData(),this.analyser.needsUpdate=!0}}])&&r(t.prototype,i),n&&r(t,n),e}();var o=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var t=new THREE.Geometry,i=new THREE.LineBasicMaterial({color:"white"}),n=-15;n<=15;n+=1)t.vertices.push(new THREE.Vector3(-15,-.04,n)),t.vertices.push(new THREE.Vector3(15,-.04,n)),t.vertices.push(new THREE.Vector3(n,-.04,-15)),t.vertices.push(new THREE.Vector3(n,-.04,15));this.line=new THREE.Line(t,i,THREE.LineSegments)};function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t,i,n,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.geometry=new THREE.SphereGeometry(.5,10,10),this.material=new THREE.MeshBasicMaterial({color:n}),this.sphereShape=new THREE.Mesh(this.geometry,this.material),this.sphereShape.name=s,this.sphereShape.position.x=i,this.sphereShape.position.z=4,this.moveForward=this.moveForward.bind(this)}var t,i,n;return t=e,(i=[{key:"moveForward",value:function(e){this.sphereShape.position.z>8?this.sphereShape.position.z=4:this.sphereShape.position.z+=e}}])&&h(t.prototype,i),n&&h(t,n),e}();var u=function(){var e=this;e.key1=[!1,0],e.key2=[!1,0],e.key3=!1,e.key4=!1,document.addEventListener("keydown",(function(t){"d"===t.key&&(e.key1[0]=!0,e.key1[1]+=1),"f"===t.key&&(e.key2[0]=!0,e.key2[1]+=1),"j"===t.key&&(e.key3[0]=!0,e.key3[1]+=1),"k"===t.key&&(e.key4[0]=!0,e.key4[1]+=1)})),document.addEventListener("keyup",(function(t){"d"===t.key&&(e.key1=[!1,0]),"f"===t.key&&(e.key2=[!1,0]),"j"===t.key&&(e.key3=[!1,0]),"k"===t.key&&(e.key4=[!1,0])}))};var l=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);(new THREE.FontLoader).load("assets/Dream MMA_Regular.typeface.json",(function(e){var i=new THREE.TextGeometry("vibe",{font:e,size:1,height:1,curveSegments:3}),n=[new THREE.MeshPhongMaterial({color:1804533,flatShading:!0}),new THREE.MeshPhongMaterial({color:74306})],s=new THREE.Mesh(i,n);s.name="title",s.position.z=4,s.position.x=-2.25,s.position.y=5,t.add(s);var r=new THREE.DirectionalLight(16777215);r.position.set(0,1,1).normalize(),t.add(r)}))};function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.score=i,this.playerInput=new u,this.canvas=t,this.scene=new THREE.Scene,this.controls=new l(this.scene),window.scene=this.scene,this.camera=new THREE.PerspectiveCamera(90,this.canvas.width/this.canvas.height,.1,1e3);var n=document.getElementsByClassName("game-container")[0];this.renderer=new THREE.WebGLRenderer({canvas:this.canvas}),this.renderer.setSize(n.clientWidth,n.clientWidth/2),this.line=new o,this.scene.add(this.line.line),this.keyspeed=.05,this.init(),this.animate=this.animate.bind(this),this.id}var t,i,n;return t=e,(i=[{key:"animate",value:function(){var e=this;this.music.fetchNewFrequencies();var t=this.music.analyser.data.slice(0,16),i=this.music.analyser.data.slice(16,32),n=this.music.analyser.data.slice(32,48),s=this.music.analyser.data.slice(48,62),r=i.reduce((function(e,t){return e+t}),0)/i.length,a=n.reduce((function(e,t){return e+t}),0)/n.length,o=s.reduce((function(e,t){return e+t}),0)/s.length,h=t[2];this.sphere.colorSwitch(h);for(var c=function(t){e.scene.children.some((function(i){i.name===t.toString()?i.position.z>=8?(i.position.z=4,e.scene.remove(i)):(1===t&&e.key1.moveForward(e.keyspeed),2===t&&e.key2.moveForward(e.keyspeed),3===t&&e.key3.moveForward(e.keyspeed),4===t&&e.key4.moveForward(e.keyspeed)):(255===h&&e.scene.add(e.key1.sphereShape),r>180&&e.scene.add(e.key2.sphereShape),a>150&&a<180&&e.scene.add(e.key3.sphereShape),o>120&&o<180&&e.scene.add(e.key4.sphereShape))}))},u=1;u<5;u++)c(u);var l=parseFloat(this.music.mediaElement.currentTime.toFixed(2));this.musicMarkers[0]<=l&&(this.keyspeed+=.01,this.musicMarkers.shift(),console.log([this.keyspeed,l])),this.keyCheck(),this.renderer.render(this.scene,this.camera),this.sphere.sphereShape.rotation.x+=.01,this.sphere.sphereShape.rotation.y+=.01,this.id=window.requestAnimationFrame(this.animate)}},{key:"keyCheck",value:function(){!0===this.playerInput.key1[0]&&this.key1.sphereShape.position.z>=7.4&&this.key1.sphereShape.position.z<=7.8&&1===this.playerInput.key1[1]&&(this.score+=20,this.key1.sphereShape.position.z=4,this.scene.remove(this.key1.sphereShape)),!0===this.playerInput.key2[0]&&this.key2.sphereShape.position.z>=7.4&&this.key2.sphereShape.position.z<=7.8&&1===this.playerInput.key2[1]&&(this.score+=20,this.key2.sphereShape.position.z=4,this.scene.remove(this.key2.sphereShape)),!0===this.playerInput.key3[0]&&this.key3.sphereShape.position.z>=7.4&&this.key3.sphereShape.position.z<=7.8&&1===this.playerInput.key3[1]&&(this.score+=20,this.key3.sphereShape.position.z=4,this.scene.remove(this.key3.sphereShape)),!0===this.playerInput.key4[0]&&this.key4.sphereShape.position.z>=7.4&&this.key4.sphereShape.position.z<=7.8&&1===this.playerInput.key4[1]&&(this.score+=20,this.key4.sphereShape.position.z=4,this.scene.remove(this.key4.sphereShape))}},{key:"init",value:function(){this.music=new a,this.sphere=new s,this.scene.add(this.sphere.sphereShape),this.key1=new c(this.scene,-1.5,"red","1"),this.key2=new c(this.scene,-.5,"green","2"),this.key3=new c(this.scene,.5,"blue","3"),this.key4=new c(this.scene,1.5,"yellow","4"),this.camera.position.z=10,this.camera.position.y=2}},{key:"renderFrame",value:function(){var e=this.music.mediaElement.duration,t=parseFloat((e/4).toFixed(2));this.musicMarkers=[t,2*t,3*t],this.animate()}}])&&p(t.prototype,i),n&&p(t,n),e}();function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.getElementById("canvas"),this.playButton=document.getElementById("play-button"),this.stopButton=document.getElementById("stop-button"),this.audio=document.getElementById("audio"),this.score=0,this.visualInit(),this.playButton.onclick=function(){t.play()},this.stopButton.onclick=function(){return t.visualizer.music.mediaElement.pause()}}var t,i,n;return t=e,(i=[{key:"visualInit",value:function(){this.visualizer=new y(this.canvas,this.score)}},{key:"play",value:function(){this.visualizer.music.mediaElement.play(),window.visualizer=this.visualizer,this.visualizer.renderFrame()}}])&&d(t.prototype,i),n&&d(t,n),e}();i(0);window.addEventListener("DOMContentLoaded",(function(){new f}))}]);
//# sourceMappingURL=main.js.map